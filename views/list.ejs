<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body class="grey-bg">


    <%- include('nav.ejs') %>

    <div class="white-bg">

      <% for(let i=0; i< posts.length; i++) { %>
        <div class="list-box">
            <h4>
                <a href="/detail/<%= posts[i]._id %>"><%= posts[i].title %>
                </a>

                <a href="/edit/<%= posts[i]._id %>">âœï¸</a>
                <span class="delete" data-id="<%= posts[i]._id %>">ğŸ—‘ï¸</span>
            </h4>
            <p> <%= posts[i].content %> </p>
        </div>
      <% } %>
    </div> 

    <script>
      //ajaxì“°ë©´ ìƒˆë¡œê³ ì¹¨ ì—†ì´ ì„œë²„ë¡œ getìš”ì²­í•´ì¤Œ / ì²«ë²ˆì§¸ ê¸€ì˜ ì‚­ì œë²„íŠ¼
      document.querySelectorAll('.delete')[0].addEventListener('click', function(e){
        fetch('/delete?docid='+e.target.dataset.id,{
          method : 'DELETE',
        })
      })

      //ë‘ë²ˆì§¸ ê¸€ì˜ ì‚­ì œë²„íŠ¼
      document.querySelectorAll('.delete')[1].addEventListener('click', function(e){
        fetch('/delete?docid='+e.target.dataset.id,{
          method : 'DELETE',
        })
      })
      //ì„¸ë²ˆì§¸ ê¸€ì˜ ì‚­ì œë²„íŠ¼
      document.querySelectorAll('.delete')[2].addEventListener('click', function(e){
        fetch('/delete?docid='+e.target.dataset.id,{
          method : 'DELETE',
        })
      })





    </script>

  
  </body>
</html>